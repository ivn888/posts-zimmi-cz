<!DOCTYPE html>
<html lang="en">
<head>
          <title>Michal Zimmermann | <span class="caps">SSH</span> <span class="caps">GRASS</span> Processing Status&nbsp;Check</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="Michal Zimmermann Full RSS Feed" />



    <meta name="tags" contents="bash" />
    <meta name="tags" contents="linux" />

        <link rel="stylesheet" href="/theme/webassets-external/51f6d10d6d7b972e72c633cdadf65306_foundation.min.css">
        <link rel="stylesheet" href="/theme/webassets-external/f8c76b8fadad6790f713cf1a3ee1ab20_pygment.css">
        <link rel="stylesheet" href="/theme/webassets-external/852031a1b55a4450770e95aa75e5cf77_screen.css">

</head>

<body id="index" class="home">
    <nav class="top-bar" data-topbar role="navigation">
        <ul class="title-area">
            <li class="name">
                <h1><a href="/posts">Home</a></h1>
            </li>
     <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
            <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>
        </ul>
        <section class="top-bar-section">
    <!-- Right Nav Section -->
            <ul class="right">
                <li><a href="/categories">Categories</a></li>
                <li><a href="/tags">Tags</a></li>
                <li><a href="/feed.xml">RSS feed</a></li>
            </ul>
        </section>
    </nav>
        <div class="row">
          <div class="large-12 columns header">
            <h1><a href="/posts">Michal Zimmermann</a> <small>Pieces of knowledge from the world of GIS.</small></h1>
          </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
<div class="panel">
    <div class="post-name">
        <h1><a href="/posts/2015/ssh-grass-processing-status-check/" rel="bookmark" title="Permalink to SSH GRASS Processing StatusÂ Check"><span class="caps">SSH</span> <span class="caps">GRASS</span> Processing Status&nbsp;Check</a></h1>
        <small>Written on Jul 21, 2015
    and marked as
    <a href="/tag/bash.html">bash</a>,     <a href="/tag/linux.html">linux</a>    | <a href="/category/development.html">development</a>
    </small>
    <section>
        <p>I&#8217;ve been running some <span class="caps">GRASS</span>/PostGIS computations on a remote server that were taking hours to finish. Once in a while I checked for their state by issuing <code>tail log_XX.log</code> from my laptop to see if they were ready yet. It suddenly became pretty annoying to check five different logs every ten&nbsp;minutes.</p>
<p>Instead of waiting and checking the logs, I thought it would be great to automate this. And it would be awesome if checking was fun. So I wrote a simple routine that takes log number as an argument (every process logs to a separate logfile) and checks it every minute until it says <em>done</em>. Right after that <code>notify-send</code> gives me a neat popup and Queen starts playing their <em>We are the champions</em> thanks to <code>mpg123</code>.</p>
<div class="highlight"><pre><span class="c">#!/usr/bin/env bash</span>
<span class="nv">item</span><span class="o">=</span><span class="nv">$1</span>

<span class="k">while</span> <span class="nb">true</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="s2">&quot;############ </span><span class="si">${</span><span class="nv">item</span><span class="si">}</span><span class="s2"> ############&quot;</span>
    <span class="nv">x</span><span class="o">=</span><span class="k">$(</span>ssh user@remote.server <span class="s2">&quot;tail -n 30 path/to/my/log_</span><span class="si">${</span><span class="nv">item</span><span class="si">}</span><span class="s2">.log&quot;</span><span class="k">)</span>

    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$x</span> <span class="o">==</span> *<span class="s2">&quot;done&quot;</span>* <span class="o">]]</span>
        <span class="k">then</span>
            notify-send -u critical <span class="s2">&quot;Finally </span><span class="si">${</span><span class="nv">item</span><span class="si">}</span><span class="s2">&quot;</span>
            mpg123 -n <span class="m">250</span> ~/Music/queen-we_are_the_champions.mp3
            <span class="nb">exit</span>
<span class="nb">        </span><span class="k">else</span> <span class="nb">echo</span> <span class="s2">&quot;Not yet&quot;</span>
    <span class="k">fi</span>
    sleep 60
<span class="k">done</span>
</pre></div>


<p>What seemed to be really frustrating makes me happy right now. Unless Freddie starts singing in the middle of the&nbsp;night.</p>
    </section>
    </div>
<div class="neighbors">
    <h3>More reading</h3>
    <ul>
        <li>
            <a href="/posts/2015/animating-svg-maps-with-smil/">
                 Animating <span class="caps">SVG</span> Maps With <span class="caps">SMIL</span>
            </a>
        </li>
         <li>
             <a href="/posts/2015/qgis-tips-for-collaborative-mapping/">
                 <span class="caps">QGIS</span> Tips For Collaborative&nbsp;Mapping
             </a>
         </li>
         <li>
             <a href="/posts/2015/hosting-website-on-openshift/">
                 Hosting Website On&nbsp;Openshift
             </a>
         </li>
         <li>
             <a href="/posts/2015/postgresql-in-vs-exists/">
                 PostgreSQL <span class="caps">IN</span> vs <span class="caps">EXISTS</span>
             </a>
         </li>
        </li>
    </ul>
</div></div>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns footer">
                <footer>
                    <address>
                    Written by <a href="http://www.zimmi.cz">Michal Zimmermann</a>.
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    </address><!-- /#about -->
                </footer><!-- /#contentinfo -->
            </div>
        </div>
<script src="/theme/webassets-external/633f060ebe664637871acbe7f7239dc4_jquery.js"></script>
<script src="/theme/webassets-external/4dac46d0971ad87d95db9a138607198c_foundation.min.js"></script>
<script>
$(document).foundation();
</script>
</body>
</html>